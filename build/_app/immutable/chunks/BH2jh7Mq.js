import{b as _,h as c,d as b,E as d,e as k,H as S,g as v,i as y,j as h,k as A,l as g,u as R,q as o,S as p}from"./Bd--v-HG.js";import{B as T}from"./D-695Hxd.js";function q(a,r,f=!1){c&&b();var n=new T(a),i=f?d:0;function s(t,u){if(c){const E=k(a)===S;if(t===E){var e=v();y(e),n.anchor=e,h(!1),n.ensure(t,u),h(!0);return}}n.ensure(t,u)}_(()=>{var t=!1;r((u,e=!0)=>{t=!0,s(e,u)}),t||s(!1,null)},i)}function w(a,r,f){c&&b();var n=new T(a);_(()=>{var i=r()??null;n.ensure(i,i&&(s=>f(s,i)))},d)}function l(a,r){return a===r||a?.[p]===r}function x(a={},r,f,n){return A(()=>{var i,s;return g(()=>{i=s,s=[],R(()=>{a!==f(...s)&&(r(a,...s),i&&l(f(...i),a)&&r(null,...i))})}),()=>{o(()=>{s&&l(f(...s),a)&&r(null,...s)})}}),a}export{x as b,w as c,q as i};
